//Copied from other site, modified.
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){const n=e=>"/avatar/"+e,i=e=>e.parentNode.removeChild(e),a=e=>document.querySelector(e),r=e=>document.querySelectorAll(e),s=()=>window.matchMedia("(max-width: 768px)").matches,o=document.querySelector("select");let c,l,d=!1;const m=async(e,t="json")=>{const n=await fetch(e);return await n[t]()},p=async()=>{const e=await m("/data.json");e.map(e=>{const n=t.find(t=>t.id===e.twitch||t.id===e.youtube);e.isPlaying=e.isStreaming=!!n,e.isStreaming&&("twitch"===n.type?e.twitchUsername=n.username:"youtube"===n.type&&(e.youtube=n.id,e.videoId=n.streamId),e.streamType=n.type,e.viewers=n.viewers)});const n=e.filter(e=>e.isStreaming&&e.isPlaying).sort((e,t)=>t.viewers-e.viewers),i=e.filter(e=>e.isPlaying&&!e.isStreaming),a=e.filter(e=>!e.isPlaying&&e.isStreaming),r=e.filter(e=>![...n,...i,...a].find(t=>t.minecraft===e.minecraft));return c=[...n,...i,...a,...r],c},f=async()=>{const e=a("h1");c.forEach(t=>{const n=a("iframe#_"+t.twitch)||a("iframe#_"+t.youtube);if(!n||l[t.minecraft]&&t.isPlaying&&t.isStreaming||i(n),t.isStreaming&&t.isPlaying&&l[t.minecraft]){if(n)return;const r=document.createElement("iframe");"twitch"===t.streamType?(r.id="_"+t.twitch,r.setAttribute("allowfullscreen",!0),r.src=`https://player.twitch.tv/?channel=${t.twitchUsername}&parent=${document.location.hostname}`,a(".streams").appendChild(r)):"youtube"===t.streamType&&(r.id="_"+t.youtube,r.setAttribute("allowfullscreen",!0),r.src=`https://www.youtube.com/embed/${t.videoId}?autoplay=1&mute=1`,a(".streams").appendChild(r)),e&&i(e)}});const t=r(".streams iframe");if(0===t.length){if(!e){const e=document.createElement("h1");e.innerText="No streams :(",a(".streams").appendChild(e)}}else if(1===t.length)t.forEach(e=>{e.style.removeProperty("height"),e.style.removeProperty("flex")});else if(2===t.length)t.forEach(e=>{e.style.removeProperty("height"),e.style.removeProperty("flex")}),a(".streams").style.setProperty("flex-flow","column");else if(t.length>2){a(".streams").style.removeProperty("flex-flow");const e=r(".streams iframe");e.length%2!=0?(e.forEach(e=>e.style.setProperty("flex","0 50%")),e[e.length-1].style.setProperty("flex","none")):e.forEach(e=>e.style.setProperty("flex","0 50%"))}},y=async()=>{let e=!1;c.forEach(t=>{const n=a(`option#t_${t.twitch}_chat`)||a(`option#y_${t.youtube}_chat`),r=a(`iframe#t_${t.twitch}_chati`)||a(`iframe#y_${t.youtube}_chati`);if(!n||l[t.minecraft]&&t.isStreaming&&t.isPlaying||i(n),!r||l[t.minecraft]&&t.isStreaming&&t.isPlaying||i(r),t.isStreaming&&t.isPlaying&&l[t.minecraft]){if(n)return void(e=!0);const i=document.createElement("option");i.innerText=t.name,"twitch"===t.streamType?(i.id=`t_${t.twitch}_chat`,i.dataset.frameId=`t_${t.twitch}_chati`,i.dataset.frameSrc=`https://www.twitch.tv/embed/${t.twitchUsername}/chat?parent=${document.location.hostname}&darkpopout`):"youtube"===t.streamType&&(i.id=`y_${t.youtube}_chat`,i.dataset.frameId=`y_${t.youtube}_chati`,i.dataset.frameSrc=`https://www.youtube.com/live_chat?v=${t.videoId}&embed_domain=${document.location.hostname}`),o.appendChild(i),e=!0}}),e||(a(".info").style.display="block",o.selectedIndex=0)},u=async()=>{const e=a(".players");e.innerHTML="";let t=c.filter(e=>e.isPlaying||e.isStreaming),i=c.filter(e=>!e.isPlaying&&!e.isStreaming);t.forEach(t=>{const i=document.createElement("div");i.classList.add("player");const a=document.createElement("img");a.classList.add("playerHead"),a.src=n(t.minecraft),a.title=a.alt=t.name+"'s head",i.appendChild(a);const r=document.createElement("span");r.classList.add("playerName"),r.innerText=t.name,i.appendChild(r);const o=document.createElement("span");if(o.className="icons",t.isStreaming){i.classList.add("streaming");const e=()=>{"twitch"===t.streamType?window.open("https://twitch.tv/"+t.twitchUsername,"_blank"):"youtube"===t.streamType&&window.open("https://youtu.be/"+t.videoId,"_blank")};s()?i.onclick=e:r.onclick=a.onclick=e}if(t.twitch||t.youtube){const e=document.createElement("div");e.classList.add("icon"),e.classList.add("icon-t-"+(t.isStreaming?"online":"offline")),e.title=t.isStreaming?`Streaming with ${t.viewers} viewers`:"Not streaming",o.appendChild(e)}else{const e=document.createElement("div");e.classList.add("icon"),e.classList.add("icon-blank"),o.appendChild(e)}const c=document.createElement("input");c.type="checkbox",c.checked=l[t.minecraft],c.onchange=()=>{l[t.minecraft]=c.checked,localStorage.setItem("preferences",JSON.stringify(l)),f(),y()},o.appendChild(c),i.appendChild(o),e.appendChild(i)});{const t=document.createElement("div");t.classList.add("player"),t.classList.add("otherPlayers"),t.style.textAlign="center",i.forEach(e=>{const i=document.createElement("img");i.classList.add("playerHead"),i.src=n(e.minecraft),i.title=i.alt=e.name,t.appendChild(i),t.innerHTML+=" "});const a=document.createElement("div");a.style.textAlign="center",a.innerText=` + ${i.length} ${1===i.length?"is":"are"} offline`,t.appendChild(a),e.appendChild(t)}d=!0};a(".hide").onclick=()=>{a(".show").style.display="block",a(".information").style.display="none"},a(".show").onclick=()=>{a(".show").style.display="none",a(".information").style.display="flex"},o.onchange=()=>{if(0===o.selectedIndex)a(".info").style.display="block",a(".embed").style.display="none";else{const e=document.createElement("iframe");e.src=o.options[o.selectedIndex].dataset.frameSrc,e.id=o.options[o.selectedIndex].dataset.frameId;const t=a(".embed");t.style.display="block",t.innerHTML="",t.appendChild(e),a(".info").style.display="none"}},p().then(()=>{(()=>{if(null===localStorage.getItem("preferences")){const e={};for(const t of c.map(e=>e.minecraft))e[t]=!0;l=e,localStorage.setItem("preferences",JSON.stringify(e))}else l=JSON.parse(localStorage.getItem("preferences"))})(),u(),s()||(f(),y())}),setInterval(()=>{p().then(()=>{u(),s()||(f(),y())})},6e4)}]);
